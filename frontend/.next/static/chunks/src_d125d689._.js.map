{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/nutrition-plan/GenerateNutritionPlan.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useAppSelector } from \"@/hooks/reduxHooks\"\r\nimport { UseMutateFunction } from \"@tanstack/react-query\"\r\n\r\nconst GenerateNutritionPlan = ({ mutateAsync, isPending }: { mutateAsync: UseMutateFunction<any, unknown, number, unknown>, isPending: boolean }) => {\r\n    const { workouts } = useAppSelector(state => state.workouts)\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center \">\r\n            <div className=\"w-[900px] text-center\">\r\n                <h1 className='page-title mb-10'>AI Nutrition Plan Generating</h1>\r\n\r\n                <button disabled={isPending ? true : false} onClick={async () => {\r\n                    if (workouts?.items) {\r\n                        for (let i = 0; i < workouts.items.length; i++) {\r\n                            await mutateAsync(i + 1);\r\n\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                }} className={`button-green w-full disabled:bg-neutral-800 ${isPending ? \"!bg-neutral-700 !cursor-auto\" : \"\"}`}>{isPending ? \"Processing\" : \"Proceed to Analysis\"}</button>\r\n            </div>\r\n        </div >\r\n\r\n    )\r\n}\r\n\r\nexport default GenerateNutritionPlan"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAKA,MAAM,wBAAwB;QAAC,EAAE,WAAW,EAAE,SAAS,EAAyF;;IAC5I,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD;gDAAE,CAAA,QAAS,MAAM,QAAQ;;IAE3D,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAG,WAAU;8BAAmB;;;;;;8BAEjC,6LAAC;oBAAO,UAAU,YAAY,OAAO;oBAAO,SAAS;wBACjD,IAAI,qBAAA,+BAAA,SAAU,KAAK,EAAE;4BACjB,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,KAAK,CAAC,MAAM,EAAE,IAAK;gCAC5C,MAAM,YAAY,IAAI;4BAE1B;wBACJ;oBAIJ;oBAAG,WAAW,AAAC,+CAA8F,OAAhD,YAAY,iCAAiC;8BAAO,YAAY,eAAe;;;;;;;;;;;;;;;;;AAK5J;GAvBM;;QACmB,6HAAA,CAAA,iBAAc;;;KADjC;uCAyBS","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/nutrition-plan/MealAccordion.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { api } from \"@/api/axiosInstance\"\r\nimport { useAppDispatch } from \"@/hooks/reduxHooks\"\r\nimport { changeStatus } from \"@/redux/nutritionDaySlice\"\r\nimport { IMeal } from \"@/types/types\"\r\nimport { useMutation } from \"@tanstack/react-query\"\r\nimport { Check, ChevronDown, Soup, Timer } from \"lucide-react\"\r\nimport Image from \"next/image\"\r\nimport { Dispatch, SetStateAction } from \"react\"\r\nconst MealAccordion = ({ meal, isOpen, setIsOpen, dayNumber, idx }: { dayNumber: number, idx: number, meal: IMeal, isOpen: string | null, setIsOpen: Dispatch<SetStateAction<string | null>> }) => {\r\n    const dispatch = useAppDispatch();\r\n    const updateMealStatus = async (dayNumber: number, index: number) => {\r\n        const res = await api.patch(`api/nutrition-plan/nutrition-plans/days/${dayNumber}/meal/status`, { index });\r\n        return res.data;\r\n\r\n    }\r\n    const mutation = useMutation({\r\n        mutationFn: ({ dayNumber, index }: { dayNumber: number; index: number }) => updateMealStatus(dayNumber, index),\r\n        onSuccess: () => {\r\n            dispatch(changeStatus(idx))\r\n        }\r\n\r\n    })\r\n\r\n\r\n    return (<div className={`_border relative rounded-[10px] overflow-hidden pt-[27px] px-4 pb-4 w-full `}>\r\n      \r\n            <div className=\"flex items-center justify-between mb-1\">\r\n                <h3 className=\"text-lg leading-7 font-semibold text-neutral-900\">\r\n                    {meal.mealTitle}\r\n                </h3>\r\n                <button onClick={() => setIsOpen(prev => prev == meal.mealTitle ? null : meal.mealTitle)} className={`text-neutral-900 transition-transform cursor-pointer outline-0 ${isOpen == meal.mealTitle ? \"rotate-180 \" : \"\"}`}>\r\n                    <ChevronDown />\r\n                </button>\r\n            </div>\r\n            <span className=\"text-sm text-neutral-600 mb-4\"><b>Time:</b> {meal.time}</span>\r\n            <div className=\"rounded-md overflow-hidden mb-4 _border\">\r\n                <Image height={144} width={516} src={meal.imageUrl} alt=\"food picture\" />\r\n            </div>\r\n            <div className=\"flex items-center justify-between\">\r\n                <p className=\"text-sm text-neutral-900 \">{meal.description}</p>\r\n                {\r\n                    meal.status !== \"eaten\" ?\r\n\r\n\r\n                        <button onClick={() => mutation.mutate({ dayNumber: dayNumber - 1, index: idx })} className=\"button-green max-w-[50px]\"><Check /></button>\r\n                        : <span className=\"button-transparent pointer-events-none\">Eaten</span>\r\n                }\r\n            </div>\r\n            {isOpen === meal.mealTitle &&\r\n                <div className=\"pt-4 flex flex-col gap-4 mt-4 border-t-[1px] border-neutral-300\">\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <h4 className=\"text-neutral-900 font-semibold flex items-center gap-2\">\r\n                            <Soup size={16} className=\"text-green\" />\r\n                            <span>Ingredients:</span>\r\n                        </h4>\r\n                        <div className=\"text-sm text-neutral-600\">\r\n                            {meal.ingredients.map((item, idx) => (<p key={idx}>{item}</p>))}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <h4 className=\"text-neutral-900 font-semibold flex items-center gap-2\">\r\n                            <Timer size={16} className=\"text-green\" />\r\n                            <span>Preparation:</span>\r\n                        </h4>\r\n                        <div className=\"text-sm text-neutral-600\">\r\n                            {meal.preparation.split(\".\").map((item, idx) => (<p key={idx}>{item}</p>))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n      \r\n    \r\n\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default MealAccordion"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;;;AARA;;;;;;;AAUA,MAAM,gBAAgB;QAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,EAA8H;;IAC1L,MAAM,WAAW,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD;IAC9B,MAAM,mBAAmB,OAAO,WAAmB;QAC/C,MAAM,MAAM,MAAM,8HAAA,CAAA,MAAG,CAAC,KAAK,CAAC,AAAC,2CAAoD,OAAV,WAAU,iBAAe;YAAE;QAAM;QACxG,OAAO,IAAI,IAAI;IAEnB;IACA,MAAM,WAAW,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAAE;QACzB,UAAU;mDAAE;oBAAC,EAAE,SAAS,EAAE,KAAK,EAAwC;uBAAK,iBAAiB,WAAW;;;QACxG,SAAS;mDAAE;gBACP,SAAS,CAAA,GAAA,oIAAA,CAAA,eAAY,AAAD,EAAE;YAC1B;;IAEJ;IAGA,qBAAQ,6LAAC;QAAI,WAAY;;0BAEjB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCACT,KAAK,SAAS;;;;;;kCAEnB,6LAAC;wBAAO,SAAS,IAAM,UAAU,CAAA,OAAQ,QAAQ,KAAK,SAAS,GAAG,OAAO,KAAK,SAAS;wBAAG,WAAW,AAAC,kEAA+G,OAA9C,UAAU,KAAK,SAAS,GAAG,gBAAgB;kCAC9M,cAAA,6LAAC,uNAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0BAGpB,6LAAC;gBAAK,WAAU;;kCAAgC,6LAAC;kCAAE;;;;;;oBAAS;oBAAE,KAAK,IAAI;;;;;;;0BACvE,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,gIAAA,CAAA,UAAK;oBAAC,QAAQ;oBAAK,OAAO;oBAAK,KAAK,KAAK,QAAQ;oBAAE,KAAI;;;;;;;;;;;0BAE5D,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAE,WAAU;kCAA6B,KAAK,WAAW;;;;;;oBAEtD,KAAK,MAAM,KAAK,wBAGZ,6LAAC;wBAAO,SAAS,IAAM,SAAS,MAAM,CAAC;gCAAE,WAAW,YAAY;gCAAG,OAAO;4BAAI;wBAAI,WAAU;kCAA4B,cAAA,6LAAC,uMAAA,CAAA,QAAK;;;;;;;;;iFAC5H,6LAAC;wBAAK,WAAU;kCAAyC;;;;;;;;;;;;YAGtE,WAAW,KAAK,SAAS,kBACtB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;;kDACV,6LAAC,qMAAA,CAAA,OAAI;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC1B,6LAAC;kDAAK;;;;;;;;;;;;0CAEV,6LAAC;gCAAI,WAAU;0CACV,KAAK,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,oBAAS,6LAAC;kDAAa;uCAAN;;;;;;;;;;;;;;;;kCAGtD,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;;kDACV,6LAAC,uMAAA,CAAA,QAAK;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC3B,6LAAC;kDAAK;;;;;;;;;;;;0CAEV,6LAAC;gCAAI,WAAU;0CACV,KAAK,WAAW,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,oBAAS,6LAAC;kDAAa;uCAAN;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrF;GAnEM;;QACe,6HAAA,CAAA,iBAAc;QAMd,iLAAA,CAAA,cAAW;;;KAP1B;uCAqES","debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/nutrition-plan/NutritionPlanPage.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { INutritionDayPlan } from \"@/types/types\"\r\nimport { useRef, useState } from \"react\"\r\nimport MealAccordion from \"./MealAccordion\";\r\nimport { GlassWater } from \"lucide-react\";\r\nimport { Bar, BarChart, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { api } from \"@/api/axiosInstance\";\r\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\r\nimport { logWater } from \"@/redux/nutritionDaySlice\";\r\nimport { useAppDispatch } from \"@/hooks/reduxHooks\";\r\n\r\n\r\n\r\n\r\n\r\nconst NutritionPlanPage = ({ day }: { day: INutritionDayPlan }) => {\r\n    const [isOpen, setIsOpen] = useState<string | null>(null);\r\n    const input = useRef<HTMLInputElement>(null);\r\n    const dispatch = useAppDispatch();\r\n    // amount of drinked water  \r\n    const [amount, setAmount] = useState<number>(0);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const weekNumber = day.dayNumber < 8 ? 1 : day.dayNumber < 15 ? 2 : day.dayNumber < 22 ? 3 : 4\r\n    const getWeeklyStatistics = async () => {\r\n        const res = await api.get(`/api/nutrition-plan/statistics?week=${weekNumber}`);\r\n        return res.data;\r\n    }\r\n    const { isLoading, data: statistics } = useQuery({\r\n        queryKey: [\"statistics\", weekNumber],\r\n        queryFn: getWeeklyStatistics,\r\n    })\r\n    const logWaterAmount = async (dayNumber: number, amount: number) => {\r\n        const res = await api.patch(`api/nutrition-plan/nutrition-plans/days/${dayNumber}/water`, { amount });\r\n        return res.data;\r\n\r\n    }\r\n    const mutation = useMutation({\r\n        mutationFn: ({ dayNumber, amount }: { dayNumber: number; amount: number }) => logWaterAmount(dayNumber, amount),\r\n        onSuccess: () => {\r\n            dispatch(logWater(amount))\r\n        }\r\n\r\n    })\r\n    return (\r\n        <div className=\"\">\r\n            <h1 className=\"page-title mb-6\">Personalized Nutrition Plan</h1>\r\n            <div className=\"_border p-6 rounded-[10px]  bg-[#F5FAF5FF] col-span-2\">\r\n                <div className=\"flex flex-col gap-12.5\">\r\n                    <div className=\"flex flex-col gap-2\">\r\n                        <h2 className=\"text-xl leading-7 font-semibold text-black font-outfit\">Today's Nutrition Goals</h2>\r\n                        <p className=\"text-black text-sm\">Stay on track with your personalized diet plan.</p>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 gap-6\">\r\n                        <div className=\"flex flex-col gap-1\">\r\n                            <div className=\"flex justify-between items-center text-black\">\r\n                                <span className=\"font-medium\">Calories</span>\r\n                                <span className=\"text-sm font-semibold\">{day.dailyGoals.calories.current}/{day.dailyGoals.calories.target} kcal</span>\r\n                            </div>\r\n                            <div className=\"w-full h-2 overflow-hidden bg-[#EBF5E9FF] _border rounded-sm\">\r\n                                <div style={{ \"width\": `${day.dailyGoals.calories.current / day.dailyGoals.calories.target * 100}%` }} className={` h-full bg-green transition-all`}></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-col gap-1\">\r\n                            <div className=\"flex justify-between items-center text-black\">\r\n                                <span className=\"font-medium\">Protein</span>\r\n                                <span className=\"text-sm font-semibold\">{day.dailyGoals.protein.current}/{day.dailyGoals.protein.target} g</span>\r\n                            </div>\r\n                            <div className=\"w-full h-2 overflow-hidden bg-[#EBF5E9FF] _border rounded-sm\">\r\n                                <div style={{ \"width\": `${day.dailyGoals.protein.current / day.dailyGoals.protein.target * 100}%` }} className={` h-full bg-green transition-all`}></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-col gap-1\">\r\n                            <div className=\"flex justify-between items-center text-black\">\r\n                                <span className=\"font-medium\">Carbs</span>\r\n                                <span className=\"text-sm font-semibold\">{day.dailyGoals.carbs.current}/{day.dailyGoals.carbs.target} g</span>\r\n                            </div>\r\n                            <div className=\"w-full h-2 overflow-hidden bg-[#EBF5E9FF] _border rounded-sm\">\r\n                                <div style={{ \"width\": `${day.dailyGoals.carbs.current / day.dailyGoals.carbs.target * 100}%` }} className={` h-full bg-green transition-all`}></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-col gap-1\">\r\n                            <div className=\"flex justify-between items-center text-black\">\r\n                                <span className=\"font-medium\">Fats</span>\r\n                                <span className=\"text-sm font-semibold\">{day.dailyGoals.fats.current}/{day.dailyGoals.fats.target} g</span>\r\n                            </div>\r\n                            <div className=\"w-full h-2 overflow-hidden bg-[#EBF5E9FF] _border rounded-sm\">\r\n                                <div style={{ \"width\": `${day.dailyGoals.fats.current / day.dailyGoals.fats.target * 100}%` }} className={` h-full bg-green transition-all`}></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n            <div className=\"mt-9 flex gap-6\">\r\n                <div className=\"flex flex-col gap-6 grow-1\">\r\n                    <h2 className=\"section-title\">Your Daily Meals</h2>\r\n                    {day.meals.map((item, idx) => (\r\n                        <MealAccordion dayNumber={day.dayNumber} key={idx} idx={idx} meal={item} isOpen={isOpen} setIsOpen={setIsOpen} />\r\n                    ))}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-6 basis-[540px]\">\r\n                    <div className=\"_border pt-6 px-4 pb-4 rounded-[10px]\">\r\n                        <div className=\"flex flex-col gap-1 mb-10\">\r\n                            <h3 className=\"text-lg leading-7 font-semibold text-neutral-900\">Daily Tracking</h3>\r\n                            <p className=\"text-sm text-neutal-600\">Log your intake to stay on target.</p>\r\n                        </div>\r\n                        <div className=\"flex flex-col gap-2 \">\r\n                            <div className=\"flex gap-2 items-center\">\r\n                                <GlassWater className=\"text-[#E67E00FF]\" size={16} />\r\n                                <span className=\"text-neutral-900 font-medium\">Water Intake</span>\r\n                            </div><div className=\"\">\r\n                                <div className=\"flex gap-2\">\r\n                                    <input ref={input} onChange={(e) => {\r\n                                        const amount = Number(e.target.value);\r\n                                        if (amount) {\r\n                                            setAmount(amount);\r\n\r\n                                        }\r\n                                        else if (e.target.value == \"\" || amount) {\r\n\r\n                                            setError(null);\r\n                                        }\r\n                                        else {\r\n                                            setError(\"Must be digits!\");\r\n                                        }\r\n\r\n                                    }} className=\"basis-[450px] text-sm input p-2!\" />\r\n                                    <button onClick={() => { mutation.mutate({ amount: amount, dayNumber: day.dayNumber-1 });input.current!.value=\"\" }\r\n                                    } className={`button-green basis-[60px] p-2! ${error ? \"pointer-events-none opacity-65\" : \"\"}`}>Log</button>\r\n                                </div>\r\n                                {error &&\r\n                                    <span data-testid='error' className=\"text-red-500 font-medium \">\r\n                                        {error}\r\n                                    </span>\r\n                                }\r\n                            </div>\r\n                            <div className=\"w-full h-2 overflow-hidden bg-[#EBF5E9FF] _border rounded-sm\">\r\n                                <div style={{ \"width\": `${day.waterIntake.current / day.waterIntake.target * 100}%` }} className={` h-full bg-green transition-all`}></div>\r\n                            </div>\r\n                            <div className=\"text-sm text-neutral-600\">You've consumed {day.waterIntake.current} ml out of {day.waterIntake.target} ml today.</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"_border pt-6 px-4 pb-4 rounded-[10px]\">\r\n                        <div className=\"flex flex-col gap-1 mb-10\">\r\n                            <h3 className=\"text-lg leading-7 font-semibold text-neutral-900\">Weekly Nutrition Trends</h3>\r\n                            <p className=\"text-sm text-neutal-600\">Overview of your daily intake over the week</p>\r\n                        </div>\r\n                        <ResponsiveContainer width=\"100%\" height={280}>\r\n                            <BarChart data={statistics}>\r\n                                <XAxis dataKey=\"day\" />\r\n                                <YAxis />\r\n                                <Tooltip />\r\n                                <Legend />\r\n                                <Bar radius={[10, 10, 10, 10]} className=\"\" dataKey=\"calories\" fill=\"#58A446\" />\r\n                                <Bar radius={[10, 10, 10, 10]} dataKey=\"protein\" fill=\"#0B1D2B\" />\r\n                                <Bar radius={[10, 10, 10, 10]} dataKey=\"carbs\" fill=\"#F57C00\" />\r\n                                <Bar radius={[10, 10, 10, 10]} dataKey=\"fats\" fill=\"#F5DEB3\" />\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default NutritionPlanPage"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1080, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/utils/report.ts"],"sourcesContent":["import { api } from \"@/api/axiosInstance\";\r\n\r\ntype AiDataType = {\r\n    AIreport: string,\r\n    imageUrl: string,\r\n}\r\n\r\nexport const reportExtractFunc = async (data: AiDataType, method: \"nutrition\" | \"fitness\") => {\r\n    const regex = /```json\\s([\\s\\S]+?)```/;\r\n    console.log(data);\r\n    let match = data.AIreport.match(regex);\r\n    try {\r\n        if (method == \"nutrition\") {\r\n            await api.post(`/api/nutrition-plan/nutrition-plans/days`, { data: match ? JSON.parse(match[1]) : JSON.parse(data.AIreport) });\r\n        } else {\r\n            await api.post(`/api/fitness-plan/reports`, { data: match ? JSON.parse(match[1]) : JSON.parse(data.AIreport), imageUrl: data.imageUrl });\r\n\r\n        }\r\n        console.log(\"Report created!\");\r\n    } catch (err) {\r\n        console.error(err);\r\n    }\r\n}   "],"names":[],"mappings":";;;AAAA;;AAOO,MAAM,oBAAoB,OAAO,MAAkB;IACtD,MAAM,QAAQ;IACd,QAAQ,GAAG,CAAC;IACZ,IAAI,QAAQ,KAAK,QAAQ,CAAC,KAAK,CAAC;IAChC,IAAI;QACA,IAAI,UAAU,aAAa;YACvB,MAAM,8HAAA,CAAA,MAAG,CAAC,IAAI,CAAE,4CAA2C;gBAAE,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,KAAK,QAAQ;YAAE;QAChI,OAAO;YACH,MAAM,8HAAA,CAAA,MAAG,CAAC,IAAI,CAAE,6BAA4B;gBAAE,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,KAAK,QAAQ;gBAAG,UAAU,KAAK,QAAQ;YAAC;QAE1I;QACA,QAAQ,GAAG,CAAC;IAChB,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC;IAClB;AACJ","debugId":null}},
    {"offset": {"line": 1114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/app/%28main%29/nutrition-plan/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { api } from '@/api/axiosInstance';\r\nimport GenerateNutritionPlan from '@/components/nutrition-plan/GenerateNutritionPlan';\r\nimport NutritionPlanPage from '@/components/nutrition-plan/NutritionPlanPage';\r\nimport { useAppSelector } from '@/hooks/reduxHooks';\r\nimport { reportExtractFunc } from '@/utils/report';\r\nimport { useMutation, useQuery } from '@tanstack/react-query';\r\nimport axios, { isAxiosError } from 'axios';\r\n\r\nconst Page = () => {\r\n    const { user } = useAppSelector(state => state.auth);\r\n    const data = useAppSelector(state=>state.nutritionDay.nutritionDay);\r\n    const getMeasurements = async () => {\r\n        const res = await api.get(\"/api/measurement/measurements\");\r\n        return res.data;\r\n    }\r\n    const { data: measurement, isLoading } = useQuery({\r\n        queryKey: [\"measurement\"],\r\n        queryFn: getMeasurements,\r\n    })\r\n\r\n// mutation - request for generation plan\r\n    const generateNutritionPlan = async (dayNumber:number) => {\r\n        if (!user) {\r\n            return null;\r\n        }\r\n        const userInfo = {\r\n            height: user.metrics.height,\r\n            weight: user.metrics.weight,\r\n            targetWeight: user.targetWeight,\r\n            primaryFitnessGoal: user.primaryFitnessGoal,\r\n            fitnessLevel: user.fitnessLevel,\r\n            gender: user.gender,\r\n            waistToHipRatio: measurement.waistToHipRatio,\r\n            shoulderToWaistRatio: measurement.shoulderToWaistRatio,\r\n            bodyFatPercent: measurement.bodyFatPercent,\r\n            muscleMass: measurement.muscleMass,\r\n            leanBodyMass: measurement.leanBodyMass,\r\n            // days: ,\r\n        }\r\n\r\n        const res = await axios.post(`http://127.0.0.1:8000/api/nutrition?dayNumber=${dayNumber}`,userInfo , {\r\n            withCredentials: true,\r\n            headers: { \"Content-Type\": \"application/json\" }\r\n        });\r\n\r\n        return res.data;\r\n    }\r\n    const mutation = useMutation({\r\n        mutationFn: generateNutritionPlan,\r\n        onSuccess: async (data) => {\r\n            await reportExtractFunc(data, \"nutrition\");\r\n            \r\n        },\r\n    \r\n        onError: (err: unknown) => {\r\n            if (isAxiosError(err) && err.response) {\r\n                console.error(err.response.data);\r\n            }\r\n        }\r\n\r\n    })\r\n    \r\n    \r\n    return (\r\n\r\n        <div className=\"\">\r\n            {(!data && !mutation.isSuccess) ? <GenerateNutritionPlan  mutateAsync={mutation.mutateAsync} isPending={mutation.isPending}/>\r\n                :\r\n                <NutritionPlanPage day={data!} />\r\n            }\r\n        </div>\r\n    );\r\n}\r\nexport default Page;"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;;;AAPA;;;;;;;;AASA,MAAM,OAAO;;IACT,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD;+BAAE,CAAA,QAAS,MAAM,IAAI;;IACnD,MAAM,OAAO,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD;qCAAE,CAAA,QAAO,MAAM,YAAY,CAAC,YAAY;;IAClE,MAAM,kBAAkB;QACpB,MAAM,MAAM,MAAM,8HAAA,CAAA,MAAG,CAAC,GAAG,CAAC;QAC1B,OAAO,IAAI,IAAI;IACnB;IACA,MAAM,EAAE,MAAM,WAAW,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,8KAAA,CAAA,WAAQ,AAAD,EAAE;QAC9C,UAAU;YAAC;SAAc;QACzB,SAAS;IACb;IAEJ,yCAAyC;IACrC,MAAM,wBAAwB,OAAO;QACjC,IAAI,CAAC,MAAM;YACP,OAAO;QACX;QACA,MAAM,WAAW;YACb,QAAQ,KAAK,OAAO,CAAC,MAAM;YAC3B,QAAQ,KAAK,OAAO,CAAC,MAAM;YAC3B,cAAc,KAAK,YAAY;YAC/B,oBAAoB,KAAK,kBAAkB;YAC3C,cAAc,KAAK,YAAY;YAC/B,QAAQ,KAAK,MAAM;YACnB,iBAAiB,YAAY,eAAe;YAC5C,sBAAsB,YAAY,oBAAoB;YACtD,gBAAgB,YAAY,cAAc;YAC1C,YAAY,YAAY,UAAU;YAClC,cAAc,YAAY,YAAY;QAE1C;QAEA,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,AAAC,iDAA0D,OAAV,YAAY,UAAW;YACjG,iBAAiB;YACjB,SAAS;gBAAE,gBAAgB;YAAmB;QAClD;QAEA,OAAO,IAAI,IAAI;IACnB;IACA,MAAM,WAAW,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAAE;QACzB,YAAY;QACZ,SAAS;0CAAE,OAAO;gBACd,MAAM,CAAA,GAAA,yHAAA,CAAA,oBAAiB,AAAD,EAAE,MAAM;YAElC;;QAEA,OAAO;0CAAE,CAAC;gBACN,IAAI,CAAA,GAAA,iJAAA,CAAA,eAAY,AAAD,EAAE,QAAQ,IAAI,QAAQ,EAAE;oBACnC,QAAQ,KAAK,CAAC,IAAI,QAAQ,CAAC,IAAI;gBACnC;YACJ;;IAEJ;IAGA,qBAEI,6LAAC;QAAI,WAAU;kBACV,AAAC,CAAC,QAAQ,CAAC,SAAS,SAAS,iBAAI,6LAAC,mKAAA,CAAA,UAAqB;YAAE,aAAa,SAAS,WAAW;YAAE,WAAW,SAAS,SAAS;;;;;qEAEtH,6LAAC,+JAAA,CAAA,UAAiB;YAAC,KAAK;;;;;;;;;;;AAIxC;GAhEM;;QACe,6HAAA,CAAA,iBAAc;QAClB,6HAAA,CAAA,iBAAc;QAKc,8KAAA,CAAA,WAAQ;QAgChC,iLAAA,CAAA,cAAW;;;KAvC1B;uCAiES","debugId":null}}]
}