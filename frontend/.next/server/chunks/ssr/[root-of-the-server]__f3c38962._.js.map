{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/ai-analysis/AnalyzedResults.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ai-analysis/AnalyzedResults.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ai-analysis/AnalyzedResults.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkT,GAC/U,gFACA","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/ai-analysis/AnalyzedResults.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ai-analysis/AnalyzedResults.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ai-analysis/AnalyzedResults.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8R,GAC3T,4DACA","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/ai-analysis/UploadPhoto.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ai-analysis/UploadPhoto.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ai-analysis/UploadPhoto.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/components/ai-analysis/UploadPhoto.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ai-analysis/UploadPhoto.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ai-analysis/UploadPhoto.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/hooks/reduxHooks.ts"],"sourcesContent":["import { AppDispatch, RootState } from \"@/redux/store\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\n\r\nexport const useAppDispatch = ()=>useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;"],"names":[],"mappings":";;;;AACA;;AAEO,MAAM,iBAAiB,IAAI,CAAA,GAAA,8IAAA,CAAA,cAAW,AAAD;AACrC,MAAM,iBAAkD,8IAAA,CAAA,cAAW","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/api/axiosInstance.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const api = axios.create({\r\n    baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n    withCredentials: true,\r\n})\r\n\r\n\r\napi.interceptors.response.use(\r\n    response => response,\r\n    async error => {\r\n        const originalReq = error.config;\r\n        if (error.response.status === 401 && !originalReq._retry && !originalReq.url.includes(\"/api/auth/refresh\")) {\r\n            originalReq._retry = true;\r\n            try {\r\n                await api.post(\"/api/auth/refresh\");\r\n                return api(originalReq);\r\n            } catch (err) {\r\n                return Promise.reject(err);\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n)"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC5B,OAAO;IACP,iBAAiB;AACrB;AAGA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAA,WAAY,UACZ,OAAM;IACF,MAAM,cAAc,MAAM,MAAM;IAChC,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,OAAO,CAAC,YAAY,MAAM,IAAI,CAAC,YAAY,GAAG,CAAC,QAAQ,CAAC,sBAAsB;QACxG,YAAY,MAAM,GAAG;QACrB,IAAI;YACA,MAAM,IAAI,IAAI,CAAC;YACf,OAAO,IAAI;QACf,EAAE,OAAO,KAAK;YACV,OAAO,QAAQ,MAAM,CAAC;QAC1B;IACJ;IACA,OAAO,QAAQ,MAAM,CAAC;AAC1B","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/utils/report.ts"],"sourcesContent":["import { api } from \"@/api/axiosInstance\";\r\n\r\ntype AiDataType = {\r\n    AIreport:string,\r\n    imageUrl:string,\r\n}\r\n\r\nexport const reportExtractFunc = async(data:AiDataType) => {\r\n    const regex = /```json\\s([\\s\\S]+?)```/;  \r\n    console.log(\"1\");\r\n\r\n    let match = data.AIreport.match(regex);\r\n\r\n    console.log(\"2\");\r\n    try{\r\n    console.log(\"3\");\r\n\r\n    await api.post(`/api/fitness-plan/reports`,{data:match ? JSON.parse(match[1]): JSON.parse(data.AIreport),imageUrl:data.imageUrl});\r\n    console.log(\"Report created!\");\r\n    }catch(err){\r\n        console.error(err);\r\n    }\r\n}   "],"names":[],"mappings":";;;AAAA;;AAOO,MAAM,oBAAoB,OAAM;IACnC,MAAM,QAAQ;IACd,QAAQ,GAAG,CAAC;IAEZ,IAAI,QAAQ,KAAK,QAAQ,CAAC,KAAK,CAAC;IAEhC,QAAQ,GAAG,CAAC;IACZ,IAAG;QACH,QAAQ,GAAG,CAAC;QAEZ,MAAM,2HAAA,CAAA,MAAG,CAAC,IAAI,CAAC,CAAC,yBAAyB,CAAC,EAAC;YAAC,MAAK,QAAQ,KAAK,KAAK,CAAC,KAAK,CAAC,EAAE,IAAG,KAAK,KAAK,CAAC,KAAK,QAAQ;YAAE,UAAS,KAAK,QAAQ;QAAA;QAC/H,QAAQ,GAAG,CAAC;IACZ,EAAC,OAAM,KAAI;QACP,QAAQ,KAAK,CAAC;IAClB;AACJ","debugId":null}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/pet%20projects/Trainix/frontend/src/app/%28main%29/ai-analysis/page.tsx"],"sourcesContent":["\r\nimport AnalyzedResults from '@/components/ai-analysis/AnalyzedResults';\r\nimport UploadPhoto from '@/components/ai-analysis/UploadPhoto';\r\nimport { useAppSelector } from '@/hooks/reduxHooks';\r\nimport { reportExtractFunc } from '@/utils/report';\r\nimport { useMutation, useQuery } from '@tanstack/react-query';\r\nimport axios from 'axios';\r\nimport { useState } from 'react';\r\n\r\nconst Page = () => {\r\n    const [fileName, setFileName] = useState('');\r\n    const [file, setFile] = useState<File | null>(null);\r\n    const { user } = useAppSelector(state => state.auth)\r\n\r\n\r\n    const [isAnalyzed, setIsAnalyzed] = useState<boolean>(false);\r\n    const sendPhoto = async (file: File) => {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", file);\r\n        console.log(\"user\", user);\r\n        const userInfo = {\r\n            height: user?.metrics.height,\r\n            weight: user?.metrics.weight,\r\n            targetWeight: user?.targetWeight,\r\n            primaryFitnessGoal: user?.primaryFitnessGoal,\r\n            fitnessLevel: user?.fitnessLevel,\r\n        }\r\n\r\n        formData.append(\"userInfo\", JSON.stringify(userInfo));\r\n        const res = await axios.post(\"http://127.0.0.1:8000/api\", formData, {\r\n            withCredentials: true,\r\n            headers: { \"Content-Type\": \"multipart/form-data\" }\r\n        });\r\n\r\n        return res.data;\r\n    }\r\n\r\n\r\n    const mutation = useMutation({\r\n        mutationFn: sendPhoto,\r\n        onSuccess: async (data) => {\r\n            setIsAnalyzed(true);\r\n            try {\r\n                await reportExtractFunc(data);\r\n\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        },\r\n\r\n    })\r\n\r\n    const getAnalysis = async ()=>{\r\n        const res\r\n        return res.data;\r\n    }\r\n\r\n\r\n    const {data} = useQuery({\r\n        queryKey:[\"getAnalysis\"],\r\n        queryFn:getAnalysis,\r\n    })\r\n    return (\r\n\r\n        <div className=\"\">\r\n            {!isAnalyzed ? <UploadPhoto isPending={mutation.isPending} file={file} fileName={fileName} setFile={setFile} mutate={mutation.mutate} setFileName={setFileName} />\r\n                :\r\n                <AnalyzedResults />\r\n            }\r\n        </div>\r\n    );\r\n}\r\nexport default Page;"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,OAAO;IACT,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD,EAAE,CAAA,QAAS,MAAM,IAAI;IAGnD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IACtD,MAAM,YAAY,OAAO;QACrB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,SAAS;QACzB,QAAQ,GAAG,CAAC,QAAQ;QACpB,MAAM,WAAW;YACb,QAAQ,MAAM,QAAQ;YACtB,QAAQ,MAAM,QAAQ;YACtB,cAAc,MAAM;YACpB,oBAAoB,MAAM;YAC1B,cAAc,MAAM;QACxB;QAEA,SAAS,MAAM,CAAC,YAAY,KAAK,SAAS,CAAC;QAC3C,MAAM,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,6BAA6B,UAAU;YAChE,iBAAiB;YACjB,SAAS;gBAAE,gBAAgB;YAAsB;QACrD;QAEA,OAAO,IAAI,IAAI;IACnB;IAGA,MAAM,WAAW,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EAAE;QACzB,YAAY;QACZ,WAAW,OAAO;YACd,cAAc;YACd,IAAI;gBACA,MAAM,CAAA,GAAA,sHAAA,CAAA,oBAAiB,AAAD,EAAE;YAE5B,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC;YAClB;QACJ;IAEJ;IAEA,MAAM,cAAc;QAChB,MAAM;QACN,OAAO,IAAI,IAAI;IACnB;IAGA,MAAM,EAAC,IAAI,EAAC,GAAG,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAE;QACpB,UAAS;YAAC;SAAc;QACxB,SAAQ;IACZ;IACA,qBAEI,8OAAC;QAAI,WAAU;kBACV,CAAC,2BAAa,8OAAC,mJAAA,CAAA,UAAW;YAAC,WAAW,SAAS,SAAS;YAAE,MAAM;YAAM,UAAU;YAAU,SAAS;YAAS,QAAQ,SAAS,MAAM;YAAE,aAAa;;;;;qEAE/I,8OAAC,uJAAA,CAAA,UAAe;;;;;;;;;;AAIhC;uCACe","debugId":null}}]
}